# Уроки настоящего: цикл 8.1
### Данный веб сервер позволяет собирать кадры из отдельных передаваемых космическим сканирующим туннельным микроскопом строчек этих кадров
## Установка
`Рекомендованная версия python: 3.11`
1. Создаём виртуальную среду: `python venv venv`
2. Активируем ёё: `venv/Scripts/activate`
3. Устанавливаем зависимости: `pip install -r requirements.txt`
## Использование
Перед запуском убедитесь что вы активировали виртуальную среду\
Запуск: `uvicorn server:app --port 778`
Запускается локальный веб-сервер на порту 778, который имеет 3 адреса: `/row`, в который загружаются строчки пикселей, `/clear`, который очищает ранее загруженные пиксели, `/pic`, который собирает картинку по строчкам пикселей\

Чтобы загрузить строчки пикселей, нужно отправить post запрос с картинкой строчки пикселей на `/row`, и обязательно указать query-параметр `row_number`, где укажите номер строчки пикселей \

После загрузки строчек пикселей, вы можете отправить get запрос на `/pic` или просто открыть в браузере `http://127.0.0.1:778/pic` и получите картинку, собранную из строчек пикселей\
Сборка изображения происходит так, что сначала строчки отсортировываются по своим номерам, потом с помощью алгоритмов библиотек PIL и numpy воссоздаётся изображение.\
Если строчки не хватает, то вместо нее встают белые пиксели\

Чтобы очистить пиксели, отправьте get запрос на `/clear` или просто откройте в браузере `http://127.0.0.1:778/clear`\

## Автоматизация
Для удобства я сделал ещё 2 программы: `slicer` и `sender`\
Первая разделяет изображение на строчки пикселей, и помещает их в папку rows, также пронумеровав каждую строчку\
Вторая отправляет запросы на сервер для загрузки строчек пикселей, отправляя каждую строчку пикселей из папки rows на сервер, тем самым загружая их\
После, можно просто в браузере открыть `http://127.0.0.1:778/pic` и получить изображение\

Эти программы созданы для тестирования, а также автоматизации\


Также я подготовил для теста изображение img.jpg, а также разделил его на строчки пикселей с помощью `slicer` в папку rows